<!DOCTYPE html>
<html>
<title>CSC 173 Final Project</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
body {font-family: "Times New Roman", Georgia, Serif;}
h1, h2, h3, h4, h5, h6 {
  font-family: "Playfair Display";
}
</style>
<body>

<!-- Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:2px;">
    <h6> CSC 173 Final Project <h6>      
  </div>
</div>


<!-- Header -->
<header class="w3-display-container w3-content w3-wide w3-center" style="max-width:1100px;min-width:100px" id="home">
  <img class="w3-image" src="images/5x4 cereals.png" alt="Cereals" width="1600" height="100" >
</header>
<div style = "padding:50px">
  <p class="w3-large">The concept of cereal started over 8000 years ago when early humans would grind up grain to create a porridge like meal. 
    The earliest breakfast cereal similar to modern day cereal was Granula. Invented by James Caleb Jackson in 1863. This cereal failed due to the fact you had to soak it overnight to just to eat. 
  </p>
  
  <p class="w3-large">
    The first modern day cereal was created by John Harvey Kellogg, when he launched Cornflakes.
    In the 1920’s cereal companies started to target children as their primary consumer. Ranger Joe was the first cereal to be pre sweetened.
    Fast forward to current day there are four manufactures who account for 86% of the market which include Kellogg Company, General Mills, Post Consumer Brands, and Quaker Oats. These four companies alone account for almost $10 billion dollars in the cereal market just the United States.
  </p>
</div>

<!-- Page content -->
<div > 

  <!-- INTERACTIVE DESIGN 1-->
  <div style="margin-top: 100px" class="w3-center" id="about">
        <div class="w3-center">
      <style>
    .rectangle {
      fill: steelblue;
    }
    .rectangle:hover {
      fill: orange;
    }

    .axis {
      font: 20px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
    .centertext{
       margin-left: auto;
       margin-right: auto;
       width: 50em;
       border:5px solid rgb(182, 182, 179);
      padding:20px;
       border-radius: 20px;
    }
    #area1, #area2, #area3, #area4, #my_dataviz{
        margin-left: auto;
       margin-right: auto;
       width: 50em;
       }
  </style>
</head>
<body>
  
        <div style="margin-top: 50px" class="w3-center">
            <h1 class="w3-center">Interactive Design 1</h1><br>
            <p class="w3-center centertext"> In our modern society we have become very health conscious. When it comes to cereal some people can even argue that it is not breakfast anymore and that it is more of a dessert due to amount of sugar in one bowl. For our first interaction it gives you the ability to compare the nutritional values of 10+ cereals ranging from calories count all the way to vitamin intake. How does one of the first modern day cereal(Cornflakes) compare to everything else?
             <p><strong>You can click at the drop down menu to view different categories of nutrional information of the cereals.</strong></p>
            </div>
   
  <div id="drop"></div>

    <div id="area1"></div>

  <script src="https://d3js.org/d3.v3.min.js"></script>
    <script>
    var d3v3 = window.d3;
    window.d3 = null;
</script>
  <script>

    var margin = { top: 50, right: 400, bottom: 200, left: 100 },
      width = 1200 - margin.left - margin.right,
      height = 610 - margin.top - margin.bottom;


      
    var svg = d3v3
      .select("#area1")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3v3.tsv("cereal.tsv", function (error, data) {
      // filter year
      var data = data.filter(function (d) {
        return d.Year == "2012";
      });
      // Get every column value
      var elements = Object.keys(data[0]).filter(function (d) {
        return (d != "Year") & (d != "State");
      });
      var selection = elements[0];

      var y = d3v3.scale
        .linear()
        .domain([
          0,
          d3v3.max(data, function (d) {
            return +d[selection];
          }),
        ])
        .range([height, 0]);

      var x = d3v3.scale
        .ordinal()
        .domain(
          data.map(function (d) {
            return d.State;
          })
        )
        .rangeBands([0, width], 0.1);

      var xAxis = d3v3.svg.axis().scale(x).orient("bottom");

      var yAxis = d3v3.svg.axis().scale(y).orient("left");

         svg.append("text")      // text label for the x axis
        .attr("x", 300 )
        .attr("y",  470 )
        .style("font-size", "30px") 
        .style("text-anchor", "middle")
        .text("Cereal name");
 
  // Add the text label for the Y axis
    svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 1 - margin.left)
        .attr("x",20 - (height / 2))
        .style("font-size", "30px") 
        .attr("dy", "0.3em")
        .style("text-anchor", "middle")
        .text("Value");

        

      svg
        .append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .selectAll("text")
        .style("font-size", "20px")
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", "-.100em")
        .attr("transform", "rotate(-90)");

      svg.append("g").attr("class", "y axis").call(yAxis);

      svg
        .selectAll("rectangle")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "rectangle")
        .attr("width", x.rangeBand())
        .attr("height", function (d) {
          return height - y(+d[selection]);
        })
       
        .attr("x", function (d, i) {
          return (width / data.length) * i;
        })
        .attr("y", function (d) {
          return y(+d[selection]);
        })
    
        .append("title")    
		.text(function(d){
			return d.State + " : " + d[selection];
		});

      var selector = d3v3
        .select("#drop")
        .append("select")
        .attr("id", "dropdown")
        .on("change", function (d) {
          selection = document.getElementById("dropdown");

          y.domain([
            0,
            d3v3.max(data, function (d) {
              return +d[selection.value];
            }),
          ]);

          yAxis.scale(y);

          d3v3.selectAll(".rectangle")
            .transition()
            .attr("height", function (d) {
              return height - y(+d[selection.value]);
            })
            .attr("x", function (d, i) {
              return (width / data.length) * i;
            })
            .attr("y", function (d) {
              return y(+d[selection.value]);
            })
            .ease("linear")
            .select("title")
            .text(function (d) {
              return d.State + " : " + d[selection.value];
            });

          d3v3.selectAll("g.y.axis").transition().call(yAxis);
        });

      selector
        .selectAll("option")
        .data(elements)
        .enter()
        .append("option")
        .attr("value", function (d) {
          return d;
        })
        
        .text(function (d) {
          return d;
        });   
    
    });
      
  </script>
</body>

        </div>

	  
  </div>

  <!-- INTERACTIVE DESIGN 2-->
  <div>
        <div class="w3-center" style="margin-top: 100px">
            <h1 class="w3-center">Interactive Design 2</h1><br>
             <h3 class="w3-center">Industry revenue of “breakfast cereal manufacturing“ in the U.S. 2012-2024</h3>
            <p class="centertext"> This statistic shows the revenue of the industry “breakfast cereal manufacturing“ in the U.S. from 2012 to 2017, with a forecast to 2024. It is projected that the revenue of breakfast cereal manufacturing in the U.S. will amount to approximately 10,3 billion U.S. Dollars by 2024.
        </div>
<meta charset="utf-8">
 


     
<style> /* set the CSS */

body { font: 15px Arial;}

path { 
    stroke: orange;
    stroke-width: 2;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 105px;					
    height: 48px;					
    padding: 2px;				
    font: 18px sans-serif;		
    background: #aee8eb;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}

</style>
         

<body>
<div id="area2"></div>


<script>

// Set the dimensions of the canvas / graph
var margin = {top: 50, right: 100, bottom: 90, left: 100},
    width = 800 - margin.left - margin.right,
    height = 430 - margin.top - margin.bottom;

// Parse the date / time
var parseDate = d3v3.time.format("%Y").parse;
var formatTime = d3v3.time.format("%Y");

// Set the ranges
var x = d3v3.time.scale().range([0, width]);
var y = d3v3.scale.linear().range([height, 0]);

    
    
// Define the axes
var xAxis = d3v3.svg.axis().scale(x)
    .orient("bottom").ticks(13);

var yAxis = d3v3.svg.axis().scale(y)
    .orient("left").ticks(5);

   
    
// Define the line
var valueline = d3v3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

// Define the div for the tooltip
var div = d3v3.select("body").append("div")	
    .attr("class", "tooltip")				
    .style("opacity", 0);

// Adds the svg canvas
var svg2 = d3v3.select("#area2")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");

// Get the data
d3v3.csv("data.csv", function(error, data) {
    data.forEach(function(d) {
        d.date = parseDate(d.date);
        d.close = +d.close;
    });

    // Scale the range of the data
    x.domain(d3v3.extent(data, function(d) { return d.date; }));
    y.domain([0, d3v3.max(data, function(d) { return d.close; })]);

    // Add the valueline path.
    svg2.append("path")
        .attr("class", "line")
        .attr("d", valueline(data));

    // Add the scatterplot
    svg2.selectAll("dot")	
        .data(data)			
    .enter().append("circle")								
        .attr("r", 5)		
        .attr("cx", function(d) { return x(d.date); })		 
        .attr("cy", function(d) { return y(d.close); })		
        .on("mouseover", function(d) {		
            div.transition()		
                .duration(200)		
                .style("opacity", .9);		
            div	.html("Year: " + formatTime(d.date) + "<br/>"  + "Rev: " + d.close)	
                .style("left", (d3v3.event.pageX) + "px")		
                .style("top", (d3v3.event.pageY - 28) + "px");	
            })					
        .on("mouseout", function(d) {		
            div.transition()		
                .duration(500)		
                .style("opacity", 0);	
        });

    // Add the X Axis
    svg2.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    // Add the Y Axis
    svg2.append("g")
        .attr("class", "y axis")
        .call(yAxis);
    
    
    // Add the text label for the X axis
    svg2.append("text") 
        .attr("x", 300 )
        .attr("y",  340 )
        .style("font-size", "26px") 
        .style("text-anchor", "middle")
        .text("Year");
    
    // Add the text label for the Y axis
    svg2.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 10 - margin.left)
        .attr("x",20 - (height / 2))
        .style("font-size", "26px") 
        .attr("dy", "0.3em")
        .style("text-anchor", "middle")
        .text("Revenue");

    

});

</script>

</body>
        
   </div>

      
      
      
     <!-- interaction 3 -->
  <div style="margin-top: 100px" class="w3-center" id="about">      
<meta charset="utf-8">
<h1>Interactive 3</h1><br>
<h3>Brushing & Zooming Stacked Area Chart</h3>
<h3>US population: Most eaten types of breakfast cereals from 2011 to 2020</h3>
<p class="centertext">In the graph shown you are able to see the total amount of cereal consumed in the US. There are several types of cereals out there, including all natural, regular, and pre-sweetened. In the early days cereals were only created using grains, wheat, corn etc. with little to no extras. Popularity in cereals didn't explode until manufactures started adding sugar to most. As seen in the graph below pre-sweetened cereal accounts for more than half of the total consumed cereal total. Did you know that more than 80% of US citizens eat cereal!</p>


<!-- Load d3.js & color scale-->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz"></div>


<script>

// set the dimensions and margins of the graph
var margin = {top: 60, right: 230, bottom: 50, left: 50},
    width = 860 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg3 = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

// Parse the Data
d3.csv("types.csv", function(data) {


  //////////
  // GENERAL //
  //////////

  // List of groups = header of the csv files
  var keys = data.columns.slice(1)

  // color palette
  var color = d3.scaleOrdinal()
    .domain(keys)
    .range(d3.schemeSet2);

  //stack the data?
  var stackedData = d3.stack()
    .keys(keys)
    (data)



  //////////
  // AXIS //
  //////////

  // Add X axis
  var x = d3.scaleLinear()
    .domain(d3.extent(data, function(d) { return d.year; }))
    .range([ 0, width ]);
  var xAxis = svg3.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x).ticks(5))

  // Add X axis label:
  svg3.append("text")
      .attr("text-anchor", "end")
      .attr("x", width)
      .attr("y", height+40 )
      .text("Time (year)");

  // Add Y axis label:
  svg3.append("text")
      .attr("text-anchor", "end")
      .attr("x", -40)
      .attr("y", -20 )
      .text("# of consumers in millions")
      .attr("text-anchor", "start")

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 800])
    .range([ height, 0 ]);
  svg3.append("g")
    .call(d3.axisLeft(y).ticks(5))



  //////////
  // BRUSHING AND CHART //
  //////////

  // Add a clipPath: everything out of this area won't be drawn.
  var clip = svg3.append("defs").append("svg:clipPath")
      .attr("id", "clip")
      .append("svg:rect")
      .attr("width", width )
      .attr("height", height )
      .attr("x", 0)
      .attr("y", 0);

  // Add brushing
  var brush = d3.brushX()                 // Add the brush feature using the d3.brush function
      .extent( [ [0,0], [width,height] ] ) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area
      .on("end", updateChart) // Each time the brush selection changes, trigger the 'updateChart' function

  // Create the scatter variable: where both the circles and the brush take place
  var areaChart = svg3.append('g')
    .attr("clip-path", "url(#clip)")

  // Area generator
  var area = d3.area()
    .x(function(d) { return x(d.data.year); })
    .y0(function(d) { return y(d[0]); })
    .y1(function(d) { return y(d[1]); })

  // Show the areas
  areaChart
    .selectAll("mylayers")
    .data(stackedData)
    .enter()
    .append("path")
      .attr("class", function(d) { return "myArea " + d.key })
      .style("fill", function(d) { return color(d.key); })
      .attr("d", area)

  // Add the brushing
  areaChart
    .append("g")
      .attr("class", "brush")
      .call(brush);

  var idleTimeout
  function idled() { idleTimeout = null; }

  // A function that update the chart for given boundaries
  function updateChart() {

    extent = d3.event.selection

    // If no selection, back to initial coordinate. Otherwise, update X axis domain
    if(!extent){
      if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit
      x.domain(d3.extent(data, function(d) { return d.year; }))
    }else{
      x.domain([ x.invert(extent[0]), x.invert(extent[1]) ])
      areaChart.select(".brush").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done
    }

    // Update axis and area position
    xAxis.transition().duration(1000).call(d3.axisBottom(x).ticks(5))
    areaChart
      .selectAll("path")
      .transition().duration(1000)
      .attr("d", area)
    }



    //////////
    // HIGHLIGHT GROUP //
    //////////

    // What to do when one group is hovered
    var highlight = function(d){
      console.log(d)
      // reduce opacity of all groups
      d3.selectAll(".myArea").style("opacity", .1)
      // expect the one that is hovered
      d3.select("."+d).style("opacity", 1)
    }

    // And when it is not hovered anymore
    var noHighlight = function(d){
      d3.selectAll(".myArea").style("opacity", 1)
    }



    //////////
    // LEGEND //
    //////////

    // Add one dot in the legend for each name.
    var size = 20
    svg3.selectAll("myrect")
      .data(keys)
      .enter()
      .append("rect")
        .attr("x", 400)
        .attr("y", function(d,i){ return 10 + i*(size+10)}) // 100 is where the first dot appears. 25 is the distance between dots
        .attr("width", size)
        .attr("height", size)
        .style("fill", function(d){ return color(d)})
        .on("mouseover", highlight)
        .on("mouseleave", noHighlight)

    // Add one dot in the legend for each name.
    svg3.selectAll("mylabels")
      .data(keys)
      .enter()
      .append("text")
        .attr("x", 400 + size*1.2)
        .attr("y", function(d,i){ return 10 + i*(size+5) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots
        .style("fill", function(d){ return color(d)})
        .text(function(d){ return d})
        .attr("text-anchor", "left")
        .style("alignment-baseline", "middle")
        .on("mouseover", highlight)
        .on("mouseleave", noHighlight)

})
</script>
      
      </div>   
      
     <!-- STATIC DESIGN -->
    <div class="w3-row w3-padding-64" id="about" style="margin-top: 100px">
       <div class="w3-center" style = "margin-top: 20px">
            
            <h1 class="w3-center">Static Design</h1><br>
	    <p class="w3-center centertext"> For our final design we chose to create a graph with a select few different cereals to show some of the most popluar ones the US. Out of the random cereals we chose to display there is a pretty close split between the eight cereals chosen. Did you know there are more than 5000 different kinds of cereals available?
            </div>
            <br>
        <div class="w3-center w3-hide-small">
          
            <img src="images/Cereal_Sales_2019.png" alt="cereal aisle" width="auto" height="auto">
        </div>
       
       
    </div>   

  <hr>













