<!DOCTYPE html>
<html>
<title>CSC 173 Final Project</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
body {font-family: "Times New Roman", Georgia, Serif;}
h1, h2, h3, h4, h5, h6 {
  font-family: "Playfair Display";
  letter-spacing: 5px;
}
</style>
<body>

<!-- Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-white w3-padding w3-card" style="letter-spacing:10px;">
    <h6> CSC 173 Final Project <h6>      
  </div>
</div>


<!-- Header -->
<header class="w3-display-container w3-content w3-wide" style="max-width:1100px;min-width:100px" id="home">
  <img class="w3-image" src="images/5x4 cereals.png" alt="Cereals" width="1600" height="100">
  <div class="w3-display-bottomleft w3-padding-large w3-opacity">
  </div>
</header>

<!-- Page content -->
<div > 

  <!-- INTERACTIVE DESIGN 1-->
  <div class="w3-row w3-padding-64" id="about">
        <div class="w3-col m6 w3-padding-large w3-hide-small">
      <style>
    .rectangle {
      fill: steelblue;
    }
    .rectangle:hover {
      fill: orange;
    }

    .axis {
      font: 20px sans-serif;
    }

    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
  </style>
</head>
<body>
  
    <p>You can click at the drop down menu to view different categories of nutrional information of the cereals.</p>
  <div id="drop"></div>

    <div id="area1"></div>

  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script>

    var margin = { top: 50, right: 400, bottom: 200, left: 100 },
      width = 1200 - margin.left - margin.right,
      height = 610 - margin.top - margin.bottom;


      
    var svg = d3
      .select("#area1")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.tsv("cereal.tsv", function (error, data) {
      // filter year
      var data = data.filter(function (d) {
        return d.Year == "2012";
      });
      // Get every column value
      var elements = Object.keys(data[0]).filter(function (d) {
        return (d != "Year") & (d != "State");
      });
      var selection = elements[0];

      var y = d3.scale
        .linear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[selection];
          }),
        ])
        .range([height, 0]);

      var x = d3.scale
        .ordinal()
        .domain(
          data.map(function (d) {
            return d.State;
          })
        )
        .rangeBands([0, width], 0.1);

      var xAxis = d3.svg.axis().scale(x).orient("bottom");

      var yAxis = d3.svg.axis().scale(y).orient("left");

         svg.append("text")      // text label for the x axis
        .attr("x", 300 )
        .attr("y",  460 )
        .style("font-size", "30px") 
        .style("text-anchor", "middle")
        .text("Cereal name");
 
  // Add the text label for the Y axis
    svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 38 - margin.left)
        .attr("x",20 - (height / 2))
        .style("font-size", "30px") 
        .attr("dy", "0.3em")
        .style("text-anchor", "middle")
        .text("Value");

        

      svg
        .append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .selectAll("text")
        .style("font-size", "20px")
        .style("text-anchor", "end")
        .attr("dx", "-.8em")
        .attr("dy", "-.100em")
        .attr("transform", "rotate(-90)");

      svg.append("g").attr("class", "y axis").call(yAxis);

      svg
        .selectAll("rectangle")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "rectangle")
        .attr("width", x.rangeBand())
        .attr("height", function (d) {
          return height - y(+d[selection]);
        })
       
        .attr("x", function (d, i) {
          return (width / data.length) * i;
        })
        .attr("y", function (d) {
          return y(+d[selection]);
        })
    
        .append("title")    
		.text(function(d){
			return d.State + " : " + d[selection];
		});

      var selector = d3
        .select("#drop")
        .append("select")
        .attr("id", "dropdown")
        .on("change", function (d) {
          selection = document.getElementById("dropdown");

          y.domain([
            0,
            d3.max(data, function (d) {
              return +d[selection.value];
            }),
          ]);

          yAxis.scale(y);

          d3.selectAll(".rectangle")
            .transition()
            .attr("height", function (d) {
              return height - y(+d[selection.value]);
            })
            .attr("x", function (d, i) {
              return (width / data.length) * i;
            })
            .attr("y", function (d) {
              return y(+d[selection.value]);
            })
            .ease("linear")
            .select("title")
            .text(function (d) {
              return d.State + " : " + d[selection.value];
            });

          d3.selectAll("g.y.axis").transition().call(yAxis);
        });

      selector
        .selectAll("option")
        .data(elements)
        .enter()
        .append("option")
        .attr("value", function (d) {
          return d;
        })
        
        .text(function (d) {
          return d;
        });   
    
    });
      
  </script>
</body>

        </div>

        <div class="w3-col m6 w3-padding-large">
            <h1 class="w3-center">Interactive Design 1</h1><br>
            <p class="w3-large">The Catering was founded in blabla by Mr. Smith in lorem ipsum dolor sit amet, consectetur adipiscing elit consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute iruredolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.We only use ingredients.
        </div>
	  
  </div>

  <!-- INTERACTIVE DESIGN 2-->
  <div>
        <div class="w3-col m6 w3-padding-large">
            <h1 class="w3-center">Interactive Design 2</h1><br>
            <p class="w3-large">The Catering was founded in blabla by Mr. Smith in lorem ipsum dolor sit amet, consectetur adipiscing elit consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute iruredolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.We only use ingredients.
        </div>
<meta charset="utf-8">
  <h1>Industry revenue of “breakfast cereal manufacturing“ in the U.S. 2012-2024
 </h1>
<h3>
This statistic shows the revenue of the industry “breakfast cereal manufacturing“ in the U.S. from 2012 to 2017, with a forecast to 2024. It is projected that the revenue of breakfast cereal manufacturing in the U.S. will amount to approximately 10,3 billion U.S. Dollars by 2024.
</h3>
<style> /* set the CSS */

body { font: 15px Arial;}

path { 
    stroke: orange;
    stroke-width: 2;
    fill: none;
}

.axis path,
.axis line {
    fill: none;
    stroke: grey;
    stroke-width: 1;
    shape-rendering: crispEdges;
}

div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 105px;					
    height: 48px;					
    padding: 2px;				
    font: 18px sans-serif;		
    background: #aee8eb;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}

</style>
         

<body>
<div id="area2"></div>

<!-- load the d3.js library -->    
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>

<script>

// Set the dimensions of the canvas / graph
var margin = {top: 50, right: 100, bottom: 60, left: 100},
    width = 800 - margin.left - margin.right,
    height = 370 - margin.top - margin.bottom;

// Parse the date / time
var parseDate = d3.time.format("%Y").parse;
var formatTime = d3.time.format("%Y");

// Set the ranges
var x = d3.time.scale().range([0, width]);
var y = d3.scale.linear().range([height, 0]);

    
    
// Define the axes
var xAxis = d3.svg.axis().scale(x)
    .orient("bottom").ticks(13);

var yAxis = d3.svg.axis().scale(y)
    .orient("left").ticks(5);

   
    
// Define the line
var valueline = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

// Define the div for the tooltip
var div = d3.select("body").append("div")	
    .attr("class", "tooltip")				
    .style("opacity", 0);

// Adds the svg canvas
var svg2 = d3.select("#area2")
    .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
    .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");

// Get the data
d3.csv("data.csv", function(error, data) {
    data.forEach(function(d) {
        d.date = parseDate(d.date);
        d.close = +d.close;
    });

    // Scale the range of the data
    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([0, d3.max(data, function(d) { return d.close; })]);

    // Add the valueline path.
    svg2.append("path")
        .attr("class", "line")
        .attr("d", valueline(data));

    // Add the scatterplot
    svg2.selectAll("dot")	
        .data(data)			
    .enter().append("circle")								
        .attr("r", 5)		
        .attr("cx", function(d) { return x(d.date); })		 
        .attr("cy", function(d) { return y(d.close); })		
        .on("mouseover", function(d) {		
            div.transition()		
                .duration(200)		
                .style("opacity", .9);		
            div	.html("Year: " + formatTime(d.date) + "<br/>"  + "Rev: " + d.close)	
                .style("left", (d3.event.pageX) + "px")		
                .style("top", (d3.event.pageY - 28) + "px");	
            })					
        .on("mouseout", function(d) {		
            div.transition()		
                .duration(500)		
                .style("opacity", 0);	
        });

    // Add the X Axis
    svg2.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    // Add the Y Axis
    svg2.append("g")
        .attr("class", "y axis")
        .call(yAxis);
    
    
    // Add the text label for the X axis
    svg2.append("text") 
        .attr("x", 300 )
        .attr("y",  320 )
        .style("font-size", "26px") 
        .style("text-anchor", "middle")
        .text("Year");
    
    // Add the text label for the Y axis
    svg2.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 48 - margin.left)
        .attr("x",20 - (height / 2))
        .style("font-size", "26px") 
        .attr("dy", "0.3em")
        .style("text-anchor", "middle")
        .text("Revenue");

    

});

</script>

</body>
        
   </div>

     <!-- STATIC DESIGN -->
    <div class="w3-row w3-padding-64" id="about">
        <div class="w3-col m6 w3-padding-large w3-hide-small">
            <img src="images/Cereal_Sales_2019.png" alt="cereal aisle" width="auto" height="auto">
        </div>
        <div class="w3-col m6 w3-padding-large" style = "margin-top: 300px">
            
            <h1 class="w3-center">Static Design</h1>
            <p class="w3-large" style="float: right; margin-right: 260px;"> We chose to do cereal sales because...
            </div>
       
    </div>   

  <hr>

</body>
</html>











